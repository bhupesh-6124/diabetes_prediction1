<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diabetes Prediction App</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
<style>
body {
    background: #E8F5E9;
    color: #333;
    font-family: 'Poppins', sans-serif;
    margin: 0;
    font-size: 16px;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

/* Navbar */
.navbar {
    position: sticky;
    top: 0;
    padding: 1rem 2rem;
    width: 100%;
    background: #388E3C;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 1000;
    flex-wrap: wrap;
}

/* Brand */
.navbar-brand {
    font-size: 2rem;
    font-weight: 600;
    color: #fff !important;
    text-decoration: none;
}
.navbar-brand:hover,
.navbar-brand:focus,
.navbar-brand:active { color:#fff !important; text-decoration:none; }

/* User info */
.navbar-user-info {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 5px;
    color: white;
    font-weight: 600;
    font-size: 1rem;
    flex-shrink: 0;
}
.navbar-user-info a {
    color: #fff;
    text-decoration: none;
    font-size: 0.85rem;
    padding: 5px 10px;
    border-radius: 8px;
    backdrop-filter: blur(6px);
    background: rgba(255,255,255,0.2);
    transition: 0.3s;
}
.navbar-user-info a:hover { background: rgba(255,255,255,0.35); }

/* Hero */
.main-content {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
}
.hero {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 80px 30px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    width: 80%;
    max-width: 800px;
    margin: 100px auto 110px auto;
    text-align: center;
}
.hero h1 { font-size: 2rem; font-weight:600; margin-bottom:20px; color:#388E3C;}
.hero p { font-size:1.1rem; margin-bottom:30px; line-height:1.6; color:#555;}
.btn-custom { background:#388E3C; color:#fff; font-size:1.1rem; padding:12px 30px; border-radius:25px; border:none; transition:0.3s; box-shadow:0 4px 15px rgba(0,0,0,0.1);}
.btn-custom:hover { background:#FF7043; transform:translateY(-3px); box-shadow:0 8px 25px rgba(0,0,0,0.2); }

/* Hamburger menu */
.hamburger-menu {
    position: fixed;
    top: 140px;
    left: 20px;
    z-index: 100;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}
.hamburger-button {
    background: #388E3C;
    color: white;
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow:0 4px 10px rgba(0,0,0,0.2);
    cursor: pointer;
    transition:0.3s;
}
.hamburger-button:hover { background:#FF7043; }
.hamburger-menu-items {
    display:none;
    margin-top:10px;
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(6px);
    padding:10px;
    border-radius:10px;
    flex-direction:column;
    gap:8px;
    min-width:140px;
}
.hamburger-menu-items a { color:#388E3C; text-decoration:none; font-weight:600; display:flex; align-items:center; gap:6px;}
.hamburger-menu-items a:hover { background:#f2f2f2; border-radius:5px; padding-left:5px; }

/* Chatbot */
.chatbot-button { position:fixed; bottom:20px; right:20px; background:#388E3C; color:white; padding:15px; border-radius:50%; border:none; cursor:pointer; font-size:20px; box-shadow:0 4px 10px rgba(0,0,0,0.2); transition:0.3s;}
.chatbot-button:hover { transform:scale(1.1); }
.chatbox { position:fixed; bottom:80px; right:20px; width:350px; background:white; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.2); display:none; flex-direction:column; overflow:hidden;}
.chatbox-header { background:#388E3C; color:white; padding:10px; text-align:center; font-weight:bold;}
.chatbox-body { height:300px; overflow-y:auto; padding:10px; background:#f8fafc;}
.chatbox-footer { display:flex; padding:10px; border-top:1px solid #ddd;}
.chatbox-footer input { flex:1; padding:8px; border:none; border-radius:5px;}
.chatbox-footer button { background:#388E3C; color:white; padding:8px 15px; border:none; border-radius:5px; margin-left:5px; cursor:pointer; }

/* Footer */
footer { padding:15px; background:#388E3C; color:#fff; font-size:1rem; text-align:center; width:100%; }

/* Responsive */
@media(max-width:768px){
    .hero { width:90%; margin-top:180px; padding:60px 20px; }
    .chatbox { width:90%; right:5%; }
    .navbar-user-info { align-items:flex-start; text-align:left; margin-top:10px; }

    /* Move hamburger inside navbar on mobile */
    .hamburger-menu {
        position: absolute;  /* inside navbar */
        top: 10px;
        right: 10px;
        left: auto;
    }
}
@media(max-width:480px){
    .hero h1 { font-size:1.5rem; }
    .hero p { font-size:1rem; }
    .btn-custom { font-size:1rem; padding:10px 20px; }
}
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar d-flex justify-content-between align-items-center">
    <a class="navbar-brand">Diabetes Predictor</a>
    {% if user_name %}
    <div class="navbar-user-info d-flex flex-column align-items-end">
        <div><i class="fas fa-user"></i> {{ user_name }}</div>
        <a href="{{ url_for('logout') }}">Logout</a>
    </div>
    {% endif %}
</nav>

<!-- Hamburger menu button -->
<div class="hamburger-menu">
    <button class="hamburger-button" onclick="toggleMenu()">
        <i class="fas fa-bars"></i>
    </button>
    <div class="hamburger-menu-items" id="menu-items">
        <a href="{{ url_for('view_history') }}"><i class="fas fa-history"></i> View History</a>
    </div>
</div>

<!-- Hero -->
<div class="main-content">
    <div class="hero">
        <h1>Welcome to the Diabetes Prediction App</h1>
        <p>Empower yourself with knowledge. Our AI-powered tool helps predict diabetes early, enabling proactive health management.</p>
        <a href="/predict" class="btn btn-custom">Start Your Prediction</a>
    </div>
</div>

<!-- Chatbot -->
<button class="chatbot-button" onclick="toggleChatbot()">ðŸ’¬</button>
<div class="chatbox" id="chatbox">
    <div class="chatbox-header">Diabetes Chatbot</div>
    <div class="chatbox-body" id="chatbox-body"></div>
    <div class="chatbox-footer">
        <input type="text" id="chat-input" placeholder="Ask me about diabetes...">
        <button onclick="sendMessage()">Send</button>
    </div>
</div>

<!-- Footer -->
<footer>
    <p>&copy; 2025 Diabetes Prediction App | Your health, our priority.</p>
</footer>

<script>
function toggleMenu(){ 
    const menu=document.getElementById("menu-items"); 
    menu.style.display=(menu.style.display==="flex")?"none":"flex"; 
}
function toggleChatbot(){ 
    const chatbox=document.getElementById("chatbox"); 
    chatbox.style.display=(chatbox.style.display==="flex")?"none":"flex"; 
}
function appendMessage(text,sender){ 
    const chatBody=document.getElementById("chatbox-body"); 
    const message=document.createElement("div"); 
    message.style.padding="8px"; 
    message.style.margin="5px"; 
    message.style.borderRadius="8px"; 
    message.innerText=text; 
    if(sender==="user"){ 
        message.style.background="#D1F2EB"; 
        message.style.textAlign="right"; 
    }else{ 
        message.style.background="#E8F5E9"; 
        message.style.textAlign="left"; 
    } 
    chatBody.appendChild(message); 
    chatBody.scrollTop=chatBody.scrollHeight; 
}
function sendMessage(){ 
    const chatInput=document.getElementById("chat-input"); 
    const userMessage=chatInput.value.trim(); 
    if(!userMessage) return; 
    appendMessage("You: "+userMessage,"user"); 
    fetch("/chatbot",{ method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify({message:userMessage}) })
    .then(res=>res.json())
    .then(data=>appendMessage("Bot: "+data.response,"bot"))
    .catch(err=>console.error(err)); 
    chatInput.value=""; 
}
document.getElementById("chat-input").addEventListener("keypress",function(event){ 
    if(event.key==="Enter") sendMessage(); 
});
</script>
</body>
</html>
